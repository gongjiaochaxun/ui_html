<!doctype html>
<html>

<head>
	<meta charset="utf-8">
	<script src="js/jquery-2.0.0.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<link rel="stylesheet" type="text/css" href="css/bootstrap-combined.min.css">
	<script>
		var getsex="male";
		function GetSex(str){
			
			if(str==0)
				getsex="female";
			else getsex="male";
			//alert(sex);
		}
		function Getregisterinfo() {
			//alert("Getregisterinfo");
			var username = $("#username").val();
			var email = $("#regisiteremail").val();
			var password = $("#password").val();
			var repassword = $("#repassword").val();
			var sex = getsex;
			//alert(username+"  "+email+"  "+password+"  "+repassword+"  "+sex);
			$.ajax({
				url: "http://127.0.0.1:8000/api/register", // 请求地址 
				type: "POST", xhrFields: {withCredentials: true}, // 请求类型
				async: true, // 是否异步执行.
				data: {
					"action": "register",
					"username": username,
					"password": password,
					"repassword": repassword,
					"email" : email,
					"sex" : sex
				},
				dataType: "json", // 返回数据的数据类型.
				success: function (data) {
					if (data.res == true) {
						alert("注册成功");
					}
					else {
						alert(data.data);
					}
				}
			});
		}

		function login() {
			//alert("login");
			var email = $("#loginemail").val();
			var password = $("#loginpassword").val();

			//lert(email+"  "+password);
			$.ajax({
				url: "http://127.0.0.1:8000/api/login", // 请求地址 
				xhrFields: {withCredentials: true},
				type: "POST", xhrFields: {withCredentials: true}, // 请求类型
				async: false, // 是否异步执行.
				data: {
					"action": "login",
					"password": password,
					"email" : email,
				},
				dataType: "json", // 返回数据的数据类型.
				success: function (data) {
					if (data.res == true) {
						alert("登录成功");
						window.open("/gjcx.html")
					}
					else {
						alert(data.data);
					}
				}
			});
		}

	</script>
</head>

<body>
	<div class="container-fluid">
		<div class="span12" style="height:280px">
		</div>
		<div class="row-fluid">
			<div class="span12">
				<div class="row-fluid">
					<div class="span2">
					</div>
					<div class="span5">
						<img src="img/gongjiao.jpg" />
					</div>
					<div class="span3">
						<div class="tabbable" id="tabs-260143">
							<ul class="nav nav-tabs">
								<li class="active">
									<a data-toggle="tab" href="#panel-100065">登录</a>
								</li>
								<li>
									<a data-toggle="tab" href="#panel-657239">注册</a>
								</li>
							</ul>
							<div class="tab-content">
								<div class="tab-pane  active" id="panel-100065">
									<form class="form-horizontal">
											<div class="control-group">
													<label class="control-label" for="inputEmail">邮箱</label>
													<div class="controls">
														<input id="loginemail" placeholder="请输入邮箱" type="text" />
													</div>
												</div>
										<div class="control-group">
											<label class="control-label" for="inputPassword">密码</label>
											<div class="controls">
												<input id="loginpassword" placeholder="请输入密码" type="password" />
											</div>
										</div>
										<!-- <div class="control-group">
											<label class="control-label" for="leibie">类别</label>
											<div class="controls">
												<div class="btn-group">
													<button class="btn" contenteditable="true">普通用户</button>
													<button data-toggle="dropdown" class="btn dropdown-toggle"><span class="caret"></span></button>
													<ul class="dropdown-menu" contenteditable="true">
														<li><a href="#">管理员</a></li>
													</ul>
												</div>
											</div>
										</div> -->
										<div class="control-group">
											<div class="controls">
												<button class="btn" type="submit" style="float:right" onclick="login()">登录</button>
												
											</div>
										</div>
									</form>
								</div>
								<div class="tab-pane" id="panel-657239">
									<form class="form-horizontal">
										<div class="control-group">
											<label class="control-label" for="inputname">用户名</label>
											<div class="controls">
												<input id="username" placeholder="请输入用户名" type="text" />
											</div>
										</div>
										<div class="control-group">
											<label class="control-label" for="inputEmail">邮箱</label>
											<div class="controls">
												<input id="regisiteremail" placeholder="请输入邮箱" type="text" />
											</div>
										</div>
										<div class="control-group">
											<label class="control-label" for="inputPassword">密码</label>
											<div class="controls">
												<input id="password" placeholder="请输入密码" type="password" />
											</div>
										</div>
										<div class="control-group">
											<label class="control-label" for="inputPassword">重复密码</label>
											<div class="controls">
												<input id="repassword" placeholder="请重复输入密码" type="password" />
											</div>
										</div>
										<div class="control-group">
												<label class="control-label" for="xingbie">性别</label>
												<div class="controls">
													<div class="btn-group">
														<button class="btn" contenteditable="true"onclick="GetSex(1)">男性</button>
														<button data-toggle="dropdown" class="btn dropdown-toggle"><span class="caret"></span></button>
														<ul class="dropdown-menu" contenteditable="true">
															<li><a href="#" onclick="GetSex(0)">女性</a></li>
														</ul>
													</div>
												</div>
											</div>
										<div class="control-group">
											<div class="controls">
												<!-- <button class="btn" type="submit" style="float:left">登录</button> -->
												<button class="btn" type="submit" style="float:right" onclick="Getregisterinfo()">注册</button>
											</div>
										</div>
									</form>
								</div>
							</div>
						</div>
						<!-- <div class="row-fluid">
							<div class="span10">
							</div>
							<div class="span2">
								<a href="ForgetPassword.html">忘记密码</a>
							</div>
						</div> -->
					</div>
					<div class="span2">
					</div>
				</div>

				<div class="row-fluid">
					<div class="span12" style="height:100px">
					</div>
					<div class="span3">
					</div>
					<div class="span6">
						<div class="row-fluid">
							<div class="span3">
								<a href="index.html">Home</a>
							</div>
							<div class="span3">
								<a href="Products.html">Products</a>
							</div>
							<div class="span3">
								<a href="Company.html">Company</a>
							</div>
							<div class="span3">
								<a href="Blog.html">Blog</a>
							</div>
						</div>
					</div>
					<div class="span3">
					</div>
				</div>
			</div>
		</div>
	</div>

</body>

</html>